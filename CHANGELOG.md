# Анализатор качества репозиториев

## 0.8.0 (19.09.2024)

* Главную сайта классно оформил, мне нравится!

  - Спасибо!

* Папку .idea хорошо бы дропнуть и после этого отправить в гитигнор - это всё-таки локальные настройки твоей IDE

  - Спрятал, у меня Rubymine тестовый

Как обычно, код не смотрела особо на первой проверке, давай разбираться с функционалом

* https://ror.zabedu.ru/repositories/7/checks/19 - проверка рубишной репы падает с ошибкой. Проблема в том, что ты используешь конфиг рубокопа из проверяемой репы, а нужно - из твоего приложения. Смысл же в том, чтобы проверять все репы пользователей по одному конфигу, даже если у них в репах вообще нет рубокопа. То же самое касается eslint

  - Добавил пути до конфигов

* https://ror.zabedu.ru/repositories/8 - проверка js-ной репы зависла на стадии клонирования

  - Не совсем понял на чём запнулось, сделал себе клон этой репы, вроде всё проходит

* Тесты падают на том, что не могу найти созданную репу с переданным github_id. Вот здесь https://github.com/isas2/rails-project-66/blob/main/app/controllers/web/repositories_controller.rb#L21 в тестах берётся стаб из фикстур, там хардкод для github_id. Получается, что ты игнорируешь github_id из параметров и всегда подставляешь тот, что в фикстурах.

  - Исправлено

* Что ещё - ходить за данными репозитория хорошо бы асинхронно, а не заставлять пользователя ждать ответа от апишки гитхаба при его создании. Есть смысл создать его только с github_id и дальше уже пойти за остальной инфой в джобе, пользователь же сможет продолжать работу с сайтом в это время.

  - Не согласен, тут всего один запрос и он достаточно быстрый.
  - Сделал асинхронно...
  - В итого теперь нужно ждать и обновлять страницу, ситуацию исправил бы какой-нибудь ajax.
  
* Ещё момент - в методах repo_info и repo_list у тебя есть какая-никакая логика, в тестах ты вообще всё это пропускаешь мимо, и стабишь сразу их результат. Правильнее стабить работу Octokit::Client, а не всего GithubHelper

  - Сделал

* Потому что не стоит в джобу передавать сущность и рассчитывать, что ты найдёшь её там в том же состоянии, в котором отправил, потому что джоба могла встать в очередь и выполниться через час, а сущность давно удалили из БД. Принято передавать айдишник, по нему искать сущность в джобе и дальше что-то с ней делать.

  - Исправлено
  
* Ну и по той же причине джоба должна ожидать ошибку по смене стейта (да и другие ошибки) и уметь что-то делать с этим, хотя бы логировать ошибки

  - Добавил проверки вида 'if check.may_finish?'... и удалил их.
  - "уметь что-то делать с этим, хотя бы логировать ошибки".. А что делает job сейчас? Это собственно и делает: возникает ошибка и она идёт в вывод (в логи).

## 0.7.0 (14.09.2024)

Первый релиз приложения